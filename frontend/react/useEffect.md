useEffect æ˜¯ React ä¸­ç”¨äºŽå¤„ç†å‰¯ä½œç”¨æ“ä½œçš„ Hookã€‚å®ƒçš„æ‰§è¡Œæ—¶æœºå–å†³äºŽä¼ é€’ç»™å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¾èµ–æ•°ç»„ï¼‰ä»¥åŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚

useEffect æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

1.ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åŒ…å«äº†éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨æ“ä½œã€‚

2.ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†å½±å“å‰¯ä½œç”¨æ‰§è¡Œçš„ä¾èµ–é¡¹ã€‚

- åªæœ‰é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œ
å½“ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„æ—¶ï¼Œåªæœ‰ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶æ‰ä¼šæ‰§è¡Œï¼Œç±»ä¼¼äºŽ componentDidMountã€‚
```js
useEffect(() => {
}, []);
```
- å¦‚æžœä½ ä¼ é€’äº†ä¸€ä¸ªåŒ…å«ä¾èµ–é¡¹çš„æ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¼šåœ¨æ¯æ¬¡è¿™äº›ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œï¼Œä»¥åŠåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚
```js
const [someValue,setValue] = useState('');

useEffect(() => {
    // setValue() è¢«è°ƒç”¨æ—¶ä¼šè§¦å‘æœ¬å‰¯ä½œç”¨å‡½æ•°
}, [someValue]);
```
- æ¯æ¬¡é¡µé¢åˆ·æ–°éƒ½æ‰§è¡Œ
```js
useEffect(() => {
});
```
useEffect è¿˜å¯ä»¥é€šè¿‡ return æŽ¥å—ä¸€ä¸ªå›žè°ƒï¼Œåœ¨é¡µé¢/ç»„ä»¶é”€æ¯æ—¶æ‰§è¡Œï¼Œ
```js
useEffect(() => {
    return () => {
        // å›žè°ƒ    
    }
});
// é¦–æ¬¡æ‰§è¡Œå‡½æ•°ä¹Ÿæ”¯æŒ æ³¨æ„ä¸è¦ç›´æŽ¥returnå‡½æ•°ï¼Œä¼šç›´æŽ¥æ‰§è¡Œçš„
useEffect(() => {
    return () => {
        // å›žè°ƒ    
    }
}, []);

useEffect(() => {
  console.log("Effect ran");
}, [time]);
// åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒuseEffect ä¸­çš„å‰¯ä½œç”¨ä¼šæ‰§è¡Œã€‚
// å¦‚æžœ time åŽç»­å‘ç”Ÿå˜åŒ–ï¼ŒuseEffect ä¼šå†æ¬¡æ‰§è¡Œã€‚
```
é—®é¢˜
1.useEffectä¸­ç›‘å¬åˆ°å˜é‡å¹¶è°ƒå–æŽ¥å£ï¼Œè°ƒå–æŽ¥å£çš„æ–¹æ³•ä½¿ç”¨äº†lodashä¸­çš„é˜²æŠ–ï¼Œä½†æ˜¯å˜é‡æ›´æ–°å‡ æ¬¡ï¼ŒæŽ¥å£ä¹Ÿä¼šæ‰§è¡Œå‡ æ¬¡ã€‚æ˜¯å› ä¸ºuseEffectç‰¹æ€§å—ï¼Œæ¯æ¬¡éƒ½åˆ·æ–°äº†é¡µé¢å—ï¼Ÿ
```js
    const getLookInfo = debounce(
        () => {
            console.log('è¯·æ±‚æŽ¥å£')
        },
        400,
        {
            leading: false,
            trailing: true,
        }
    );

    useEffect(() => {
        console.log("userId", userId);
        if (userId) {
            getLookInfo();
        }
    }, [userId]);
```

2. ä¸èƒ½åœ¨ useEffect åˆå§‹å‡½æ•°ä¸­ä½¿ç”¨ useState ç›´æŽ¥èµ‹å€¼

å› ä¸º react ç»„ä»¶æŽ¥å—åˆ°æ–°å€¼ä¼šé‡æ–°æ¸²æŸ“ï¼ŒuseState çš„èµ‹å€¼ä¼šå½±å“é¡µé¢å±•ç¤ºæˆ–å˜é‡å€¼å……å€¼

é”™è¯¯å†™æ³•
```
const [count, setCount] = useState(0)

useEffect(() => {
  const timer = setInterval(() => {
    setCount(count + 1) // ðŸš¨ è¿™ä¸ª count å…¶å®žæ°¸è¿œæ˜¯ 0
  }, 1000)
}, [])
```
æ”¹æ­£
```
useEffect(() => {
  const timer = setInterval(() => {
    setCount(prevCount => prevCount + 1); // æ°¸è¿œèŽ·å–æœ€æ–°å€¼
  }, 1000);
  return () => clearInterval(timer);
}, []);
```