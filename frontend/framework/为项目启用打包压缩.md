通用需要查看是否有框架提供配置项

## 有提供配置项的框架

### vite

在 build 中可以根据[官方文档](https://cn.vite.dev/config/build-options.html)进行配置


```js
// vite.config.js
export default defineConfig((config: ConfigEnv) => {
    return {
        build: {
            // 输出文件夹
            outDir: "dist",
            // 静态资源存放位置
            assetsDir: "assets",
            // 小于此阈值的导入或引用资源将内联为 base64 编码，以避免额外的 http 请求
            assetsInlineLimit: 4096,
            //构建后是否生成 source map 文件
            sourcemap: false,
            // 客户端构建默认为'esbuild'，SSR构建默认为 false，设置 terser，需要单独安装 terser 依赖（npm add -D terser）
            minify: "terser",
            terserOptions: {
                compress: {
                    // 移除 console
                    drop_console: true,
                    // 移除 debugger
                    drop_debugger: true,
                },
            },
            // 代码分割配置
            rollupOptions: {
                output: {
                    manualChunks: {
                        // 将 Vue 相关库分离到单独的 chunk
                        vue: ["vue", "vue-router", "vuex"],
                        // 将 Element Plus 分离到单独的 chunk
                        "element-plus": ["element-plus"],
                        // 将工具库分离到单独的 chunk
                        utils: ["axios", "dayjs", "qs"],
                    },
                },
            },
            // 调整 chunk 大小警告限制
            chunkSizeWarningLimit: 1000,
            // CSS 代码分割
            cssCodeSplit: true,
        },
        optimizeDeps: {
            entries: ["index.html"],
            // 预构建依赖配置
            include: [
                "vue",
                "vue-router",
                "vuex",
                "element-plus",
                "axios",
                "dayjs",
                "qs",
            ],
        },
    }
})
```


## 没有提供配置项的框架

### 在 vue-cli 中通过 configureWebpack 入口配置

[链接](https://cli.vuejs.org/zh/guide/webpack.html)

可以传入对象，通过 webpack-merge 合并到最终的配置中

```js
// vue.config.js
module.exports = {
	configureWebpack: {
		// 指定入口文件
		entry: './src/main.ts',
		resolve: {
			alias: {
				'@/': resolve(__dirname, 'src/')
			},
			extensions: ['.js', '.ts', '.vue', '.json']
		},
		// 生产环境的优化配置
		optimization: {
			// 拆分公共模块
			splitChunks: {
				chunks: 'all',
				cacheGroups: {
					// 第三方库
					vendors: {
						name: 'vendors',
						test: /[\\/]node_modules[\\/]/,
						priority: -10
					},
					// 公共代码
					common: {
						name: 'common',
						minSize: 30000,
						minChunks: 3,
						priority: -20,
						reuseExistingChunk: true
					}
				}
			}
		}
	},
}
```

如果传入函数，则会接收被解析的配置作为参数。该函数既可以修改配置并不返回任何东西，也可以返回一个被克隆或合并过的配置版本

```js
// vue.config.js
module.exports = {
  configureWebpack: config => {
    if (process.env.NODE_ENV === 'production') {
      // 为生产环境修改配置...
    } else {
      // 为开发环境修改配置...
    }
  }
}
```

### umimax 项目中可以通过链式配置

```js
export default defineConfig({
    chainWebpack: (memo, { env }) => {
        memo.optimization.splitChunks({
            cacheGroups: {
            styles: {
                name: 'styles',
                test: /\.css$/,
                chunks: 'all',
                enforce: true,
            },
            },
        });

        memo.optimization.chunkIds('named');
    }
})
```